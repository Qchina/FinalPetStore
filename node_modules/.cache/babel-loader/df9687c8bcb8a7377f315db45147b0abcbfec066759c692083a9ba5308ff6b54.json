{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { catalogApi } from '@/api/catalog';\nexport default {\n  props: {\n    productId: {\n      type: String,\n      required: true\n    },\n    categoryId: {\n      type: String,\n      required: true\n    }\n  },\n  data() {\n    return {\n      product: {},\n      items: [],\n      categoryName: ''\n    };\n  },\n  watch: {\n    productId: {\n      immediate: true,\n      handler: 'fetchProductDetails'\n    }\n  },\n  methods: {\n    async fetchProductDetails() {\n      try {\n        // 获取分类信息\n        const categoryResponse = await catalogApi.getCategory(this.categoryId);\n        if (categoryResponse.data.status === 0) {\n          this.categoryName = categoryResponse.data.data.name || this.getCategoryName(this.categoryId);\n        } else {\n          this.categoryName = this.getCategoryName(this.categoryId);\n        }\n\n        // 获取产品信息\n        const productResponse = await catalogApi.getProduct(this.productId);\n        if (productResponse.data.status === 0) {\n          this.product = productResponse.data.data;\n          // 直接使用产品信息中的 itemList\n          this.items = productResponse.data.data.itemList || [];\n\n          // 为每个item添加description\n          this.items = this.items.map(item => ({\n            ...item,\n            description: item.attribute1 || 'No description available'\n          }));\n        } else {\n          console.error('Failed to fetch product:', productResponse.data.msg);\n          this.useMockData();\n        }\n      } catch (error) {\n        console.error('Failed to fetch product details:', error);\n        this.useMockData();\n      }\n    },\n    // 使用模拟数据的方法\n    useMockData() {\n      // 根据productId获取产品信息\n      if (this.productId === 'FI-SW-01') {\n        this.product = {\n          id: 'FI-SW-01',\n          name: 'Angelfish',\n          categoryId: 'FISH'\n        };\n        this.items = [{\n          itemId: 'EST-1',\n          productId: 'FI-SW-01',\n          description: 'Large Angelfish',\n          listPrice: 16.50\n        }, {\n          itemId: 'EST-2',\n          productId: 'FI-SW-01',\n          description: 'Small Angelfish',\n          listPrice: 16.50\n        }];\n      } else if (this.productId === 'FI-SW-02') {\n        this.product = {\n          id: 'FI-SW-02',\n          name: 'Tiger Shark',\n          categoryId: 'FISH'\n        };\n        this.items = [{\n          itemId: 'EST-3',\n          productId: 'FI-SW-02',\n          description: 'Toothless Tiger Shark',\n          listPrice: 18.50\n        }];\n      }\n      // ... 其他模拟数据保持不变 ...\n    },\n    // 其他方法保持不变\n    getCategoryName(categoryId) {\n      const categories = {\n        'FISH': 'FISH',\n        'DOGS': 'DOGS',\n        'CATS': 'CATS',\n        'REPTILES': 'REPTILES',\n        'BIRDS': 'BIRDS'\n      };\n      return categories[categoryId] || categoryId;\n    },\n    addToCart(item) {\n      // 这里添加购物车逻辑\n      console.log('Add to cart:', item);\n      alert(`Added ${item.description} to cart!`);\n    },\n    returnToCategory() {\n      this.$emit('return-to-category');\n    },\n    navigateToItem(itemId) {\n      // 修改为发射事件而不是直接导航\n      this.$emit('navigate-to-item', itemId);\n    }\n  }\n};","map":{"version":3,"names":["catalogApi","props","productId","type","String","required","categoryId","data","product","items","categoryName","watch","immediate","handler","methods","fetchProductDetails","categoryResponse","getCategory","status","name","getCategoryName","productResponse","getProduct","itemList","map","item","description","attribute1","console","error","msg","useMockData","id","itemId","listPrice","categories","addToCart","log","alert","returnToCategory","$emit","navigateToItem"],"sources":["D:\\ournewpetstore\\src\\components\\commodity\\ProductDetail.vue"],"sourcesContent":["<template>\r\n  <div class=\"product-detail-container\">\r\n    <div class=\"auth-form\">\r\n      <div class=\"header-container\">\r\n        <h2>{{ product.name }}</h2>\r\n        <button type=\"button\" @click=\"returnToCategory\" class=\"return-button\">Return to {{ categoryName }}</button>\r\n      </div>\r\n      <div class=\"form-container\">\r\n        <div class=\"form-group header-group\">\r\n          <div class=\"col\">Item ID</div>\r\n          <div class=\"col\">Product ID</div>\r\n          <div class=\"col\">Description</div>\r\n          <div class=\"col\">List Price</div>\r\n          <div class=\"col\"></div>\r\n        </div>\r\n        <div v-for=\"item in items\" :key=\"item.itemId\" class=\"form-group product-item\" @click=\"navigateToItem(item.itemId)\">\r\n          <div class=\"col\">{{ item.itemId }}</div>\r\n          <div class=\"col\">{{ item.productId }}</div>\r\n          <div class=\"col\">{{ item.description }}</div>\r\n          <div class=\"col\">${{ item.listPrice.toFixed(2) }}</div>\r\n          <div class=\"col\">\r\n            <button @click.stop=\"addToCart(item)\" class=\"add-to-cart-btn\">Add to Cart</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { catalogApi } from '@/api/catalog';\r\n\r\nexport default {\r\n  props: {\r\n    productId: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    categoryId: {\r\n      type: String,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      product: {},\r\n      items: [],\r\n      categoryName: ''\r\n    };\r\n  },\r\n  watch: {\r\n    productId: {\r\n      immediate: true,\r\n      handler: 'fetchProductDetails'\r\n    }\r\n  },\r\n  methods: {\r\n    async fetchProductDetails() {\r\n      try {\r\n        // 获取分类信息\r\n        const categoryResponse = await catalogApi.getCategory(this.categoryId);\r\n        if (categoryResponse.data.status === 0) {\r\n          this.categoryName = categoryResponse.data.data.name || this.getCategoryName(this.categoryId);\r\n        } else {\r\n          this.categoryName = this.getCategoryName(this.categoryId);\r\n        }\r\n        \r\n        // 获取产品信息\r\n        const productResponse = await catalogApi.getProduct(this.productId);\r\n        if (productResponse.data.status === 0) {\r\n          this.product = productResponse.data.data;\r\n          // 直接使用产品信息中的 itemList\r\n          this.items = productResponse.data.data.itemList || [];\r\n          \r\n          // 为每个item添加description\r\n          this.items = this.items.map(item => ({\r\n            ...item,\r\n            description: item.attribute1 || 'No description available'\r\n          }));\r\n        } else {\r\n          console.error('Failed to fetch product:', productResponse.data.msg);\r\n          this.useMockData();\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to fetch product details:', error);\r\n        this.useMockData();\r\n      }\r\n    },\r\n    \r\n    // 使用模拟数据的方法\r\n    useMockData() {\r\n      // 根据productId获取产品信息\r\n      if (this.productId === 'FI-SW-01') {\r\n        this.product = { id: 'FI-SW-01', name: 'Angelfish', categoryId: 'FISH' };\r\n        this.items = [\r\n          { itemId: 'EST-1', productId: 'FI-SW-01', description: 'Large Angelfish', listPrice: 16.50 },\r\n          { itemId: 'EST-2', productId: 'FI-SW-01', description: 'Small Angelfish', listPrice: 16.50 }\r\n        ];\r\n      } else if (this.productId === 'FI-SW-02') {\r\n        this.product = { id: 'FI-SW-02', name: 'Tiger Shark', categoryId: 'FISH' };\r\n        this.items = [\r\n          { itemId: 'EST-3', productId: 'FI-SW-02', description: 'Toothless Tiger Shark', listPrice: 18.50 }\r\n        ];\r\n      }\r\n      // ... 其他模拟数据保持不变 ...\r\n    },\r\n    \r\n    // 其他方法保持不变\r\n    getCategoryName(categoryId) {\r\n      const categories = {\r\n        'FISH': 'FISH',\r\n        'DOGS': 'DOGS',\r\n        'CATS': 'CATS',\r\n        'REPTILES': 'REPTILES',\r\n        'BIRDS': 'BIRDS'\r\n      };\r\n      return categories[categoryId] || categoryId;\r\n    },\r\n    \r\n    addToCart(item) {\r\n      // 这里添加购物车逻辑\r\n      console.log('Add to cart:', item);\r\n      alert(`Added ${item.description} to cart!`);\r\n    },\r\n    \r\n    returnToCategory() {\r\n      this.$emit('return-to-category');\r\n    },\r\n    \r\n    navigateToItem(itemId) {\r\n      // 修改为发射事件而不是直接导航\r\n      this.$emit('navigate-to-item', itemId);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.product-detail-container {\r\n  max-width: 900px;\r\n  margin: 0 auto;\r\n  padding: 30px;\r\n}\r\n\r\n.auth-form {\r\n  max-width: 900px;\r\n  margin: 0 auto;\r\n  padding: 30px;\r\n  border-radius: 10px;\r\n  background-color: rgba(255, 255, 255, 0.9);\r\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);\r\n  transform: translateY(0);\r\n  transition: all 0.3s ease;\r\n  position: relative;\r\n  z-index: 1;\r\n}\r\n\r\n.auth-form:hover {\r\n  transform: translateY(-5px);\r\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.header-container {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n  gap: 20px;\r\n}\r\n\r\nh2 {\r\n  text-align: left;\r\n  margin-bottom: 0;\r\n  font-size: 20px;\r\n}\r\n\r\n.return-button {\r\n  width: auto;\r\n  padding: 8px 16px;\r\n  font-size: 14px;\r\n}\r\n\r\n.form-container {\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n}\r\n\r\nbutton {\r\n  background-color: #2196F3;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 25px;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\nbutton:hover {\r\n  background-color: #0b7dda;\r\n  transform: scale(1.02);\r\n}\r\n\r\n.add-to-cart-btn {\r\n  padding: 6px 12px;\r\n  font-size: 14px;\r\n  width: 100%;\r\n}\r\n\r\n.form-group {\r\n  display: flex;\r\n  border-bottom: 1px solid #e0e0e0;\r\n}\r\n\r\n.form-group:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.header-group {\r\n  background-color: #f5f5f5;\r\n  font-weight: bold;\r\n}\r\n\r\n.col {\r\n  flex: 1;\r\n  padding: 12px;\r\n  word-break: break-word;\r\n  border-right: 1px solid #e0e0e0;\r\n}\r\n\r\n.col:last-child {\r\n  border-right: none;\r\n}\r\n\r\n.product-item:nth-child(even) {\r\n  background-color: #fafafa;\r\n}\r\n\r\n.product-item {\r\n  cursor: pointer;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.product-item:hover {\r\n  background-color: #f0f0f0;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}