{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Header from '@/components/CommonTop.vue';\nimport CommodityList from '@/components/commodity/CommodityList.vue';\nimport CategoryDetail from '@/components/commodity/CategoryDetail.vue';\nimport ProductDetail from '@/components/commodity/ProductDetail.vue';\nimport ItemDetail from '@/components/commodity/ItemDetail.vue';\nexport default {\n  components: {\n    Header,\n    CommodityList,\n    CategoryDetail,\n    ProductDetail,\n    ItemDetail\n  },\n  props: {\n    category: {\n      type: String,\n      default: ''\n    },\n    productId: {\n      type: String,\n      default: ''\n    },\n    itemId: {\n      type: String,\n      default: ''\n    },\n    view: {\n      type: String,\n      default: ''\n    }\n  },\n  data() {\n    return {\n      showCommodityList: !this.category && !this.productId && !this.itemId,\n      showCategoryDetail: !!this.category && !this.productId && !this.itemId,\n      showProductDetail: !!this.productId && !this.itemId,\n      showItemDetail: !!this.itemId,\n      selectedCategory: this.category || '',\n      selectedProductId: this.productId || '',\n      selectedItemId: this.itemId || ''\n    };\n  },\n  created() {\n    // 组件创建时根据路由参数初始化状态\n    this.initializeFromRoute(this.$route);\n  },\n  watch: {\n    // 监听路由参数变化\n    $route(to) {\n      this.initializeFromRoute(to);\n    }\n  },\n  methods: {\n    // 根据路由参数初始化组件状态\n    initializeFromRoute(route) {\n      if (route.params.itemId) {\n        // 如果有商品项ID参数，显示商品项详情\n        this.selectedItemId = route.params.itemId;\n        this.selectedProductId = route.params.productId;\n        this.selectedCategory = route.params.categoryId;\n        this.showCommodityList = false;\n        this.showCategoryDetail = false;\n        this.showProductDetail = false;\n        this.showItemDetail = true;\n      } else if (route.params.productId) {\n        // 如果有产品ID参数，显示产品详情\n        this.selectedProductId = route.params.productId;\n        this.selectedCategory = route.params.categoryId;\n        this.selectedItemId = '';\n        this.showCommodityList = false;\n        this.showCategoryDetail = false;\n        this.showProductDetail = true;\n        this.showItemDetail = false;\n      } else if (route.params.category) {\n        // 如果只有分类参数，显示分类详情\n        this.selectedCategory = route.params.category;\n        this.selectedProductId = '';\n        this.selectedItemId = '';\n        this.showCommodityList = false;\n        this.showCategoryDetail = true;\n        this.showProductDetail = false;\n        this.showItemDetail = false;\n      } else {\n        // 如果没有参数，显示商品列表\n        this.selectedCategory = '';\n        this.selectedProductId = '';\n        this.selectedItemId = '';\n        this.showCommodityList = true;\n        this.showCategoryDetail = false;\n        this.showProductDetail = false;\n        this.showItemDetail = false;\n      }\n    },\n    switchToCategoryDetail(category) {\n      this.selectedCategory = category;\n      this.showCommodityList = false;\n      this.showCategoryDetail = true;\n      this.showProductDetail = false;\n      this.showItemDetail = false;\n      // 更新URL，但不重新加载页面\n      this.$router.push(`/commodity/${category}`);\n    },\n    viewProduct(productId, category) {\n      this.selectedProductId = productId;\n      this.selectedCategory = category;\n      this.showCommodityList = false;\n      this.showCategoryDetail = false;\n      this.showProductDetail = true;\n      this.showItemDetail = false;\n      // 更新URL以包含产品ID\n      this.$router.push(`/commodity/${category}/product/${productId}`);\n    },\n    navigateToItem(itemId) {\n      this.selectedItemId = itemId;\n      this.showCommodityList = false;\n      this.showCategoryDetail = false;\n      this.showProductDetail = false;\n      this.showItemDetail = true;\n      // 更新URL以包含商品项ID\n      this.$router.push(`/commodity/${this.selectedCategory}/product/${this.selectedProductId}/item/${itemId}`);\n    },\n    returnToCategory() {\n      this.showCategoryDetail = true;\n      this.showCommodityList = false;\n      this.showProductDetail = false;\n      this.showItemDetail = false;\n      this.selectedProductId = '';\n      this.selectedItemId = '';\n      this.$router.push(`/commodity/${this.selectedCategory}`);\n    },\n    returnToProduct() {\n      this.showProductDetail = true;\n      this.showCategoryDetail = false;\n      this.showCommodityList = false;\n      this.showItemDetail = false;\n      this.selectedItemId = '';\n      this.$router.push(`/commodity/${this.selectedCategory}/product/${this.selectedProductId}`);\n    },\n    returnToMain() {\n      this.showCommodityList = true;\n      this.showCategoryDetail = false;\n      this.showProductDetail = false;\n      this.showItemDetail = false;\n      this.selectedCategory = '';\n      this.selectedProductId = '';\n      this.selectedItemId = '';\n      this.$router.push('/commodity');\n    }\n  }\n};","map":{"version":3,"names":["Header","CommodityList","CategoryDetail","ProductDetail","ItemDetail","components","props","category","type","String","default","productId","itemId","view","data","showCommodityList","showCategoryDetail","showProductDetail","showItemDetail","selectedCategory","selectedProductId","selectedItemId","created","initializeFromRoute","$route","watch","to","methods","route","params","categoryId","switchToCategoryDetail","$router","push","viewProduct","navigateToItem","returnToCategory","returnToProduct","returnToMain"],"sources":["D:\\ournewpetstore\\src\\views\\commodity\\CommodityView.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <Header />\r\n      <div class=\"commodity-container\">\r\n        <div class=\"commodity-background\"></div>\r\n        <CommodityList \r\n          v-if=\"showCommodityList\" \r\n          @switch-to-category-detail=\"switchToCategoryDetail\" \r\n          class=\"commodity-content\"\r\n        />\r\n        <CategoryDetail \r\n          v-else-if=\"showCategoryDetail\"\r\n          :category=\"selectedCategory\" \r\n          @switch-to-commodity-list=\"showCommodityList = true\" \r\n          @view-product=\"viewProduct\"\r\n          class=\"commodity-content\"\r\n        />\r\n        <ProductDetail\r\n          v-else-if=\"showProductDetail\"\r\n          :productId=\"selectedProductId\"\r\n          :categoryId=\"selectedCategory\"\r\n          @return-to-category=\"returnToCategory\"\r\n          @navigate-to-item=\"navigateToItem\"\r\n          class=\"commodity-content\"\r\n        />\r\n        <ItemDetail\r\n          v-else-if=\"showItemDetail\"\r\n          :itemId=\"selectedItemId\"\r\n          :productId=\"selectedProductId\"\r\n          :categoryId=\"selectedCategory\"\r\n          @return-to-product=\"returnToProduct\"\r\n          @return-to-main=\"returnToMain\"\r\n          class=\"commodity-content\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </template>\r\n\r\n<script>\r\nimport Header from '@/components/CommonTop.vue';\r\nimport CommodityList from '@/components/commodity/CommodityList.vue';\r\nimport CategoryDetail from '@/components/commodity/CategoryDetail.vue';\r\nimport ProductDetail from '@/components/commodity/ProductDetail.vue';\r\nimport ItemDetail from '@/components/commodity/ItemDetail.vue';\r\n\r\nexport default {\r\n  components: {\r\n    Header,\r\n    CommodityList,\r\n    CategoryDetail,\r\n    ProductDetail,\r\n    ItemDetail\r\n  },\r\n  props: {\r\n    category: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    productId: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    itemId: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    view: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      showCommodityList: !this.category && !this.productId && !this.itemId,\r\n      showCategoryDetail: !!this.category && !this.productId && !this.itemId,\r\n      showProductDetail: !!this.productId && !this.itemId,\r\n      showItemDetail: !!this.itemId,\r\n      selectedCategory: this.category || '',\r\n      selectedProductId: this.productId || '',\r\n      selectedItemId: this.itemId || ''\r\n    }\r\n  },\r\n  created() {\r\n    // 组件创建时根据路由参数初始化状态\r\n    this.initializeFromRoute(this.$route);\r\n  },\r\n  watch: {\r\n    // 监听路由参数变化\r\n    $route(to) {\r\n      this.initializeFromRoute(to);\r\n    }\r\n  },\r\n  methods: {\r\n    // 根据路由参数初始化组件状态\r\n    initializeFromRoute(route) {\r\n      if (route.params.itemId) {\r\n        // 如果有商品项ID参数，显示商品项详情\r\n        this.selectedItemId = route.params.itemId;\r\n        this.selectedProductId = route.params.productId;\r\n        this.selectedCategory = route.params.categoryId;\r\n        this.showCommodityList = false;\r\n        this.showCategoryDetail = false;\r\n        this.showProductDetail = false;\r\n        this.showItemDetail = true;\r\n      } else if (route.params.productId) {\r\n        // 如果有产品ID参数，显示产品详情\r\n        this.selectedProductId = route.params.productId;\r\n        this.selectedCategory = route.params.categoryId;\r\n        this.selectedItemId = '';\r\n        this.showCommodityList = false;\r\n        this.showCategoryDetail = false;\r\n        this.showProductDetail = true;\r\n        this.showItemDetail = false;\r\n      } else if (route.params.category) {\r\n        // 如果只有分类参数，显示分类详情\r\n        this.selectedCategory = route.params.category;\r\n        this.selectedProductId = '';\r\n        this.selectedItemId = '';\r\n        this.showCommodityList = false;\r\n        this.showCategoryDetail = true;\r\n        this.showProductDetail = false;\r\n        this.showItemDetail = false;\r\n      } else {\r\n        // 如果没有参数，显示商品列表\r\n        this.selectedCategory = '';\r\n        this.selectedProductId = '';\r\n        this.selectedItemId = '';\r\n        this.showCommodityList = true;\r\n        this.showCategoryDetail = false;\r\n        this.showProductDetail = false;\r\n        this.showItemDetail = false;\r\n      }\r\n    },\r\n    switchToCategoryDetail(category) {\r\n      this.selectedCategory = category;\r\n      this.showCommodityList = false;\r\n      this.showCategoryDetail = true;\r\n      this.showProductDetail = false;\r\n      this.showItemDetail = false;\r\n      // 更新URL，但不重新加载页面\r\n      this.$router.push(`/commodity/${category}`);\r\n    },\r\n    viewProduct(productId, category) {\r\n      this.selectedProductId = productId;\r\n      this.selectedCategory = category;\r\n      this.showCommodityList = false;\r\n      this.showCategoryDetail = false;\r\n      this.showProductDetail = true;\r\n      this.showItemDetail = false;\r\n      // 更新URL以包含产品ID\r\n      this.$router.push(`/commodity/${category}/product/${productId}`);\r\n    },\r\n    navigateToItem(itemId) {\r\n      this.selectedItemId = itemId;\r\n      this.showCommodityList = false;\r\n      this.showCategoryDetail = false;\r\n      this.showProductDetail = false;\r\n      this.showItemDetail = true;\r\n      // 更新URL以包含商品项ID\r\n      this.$router.push(`/commodity/${this.selectedCategory}/product/${this.selectedProductId}/item/${itemId}`);\r\n    },\r\n    returnToCategory() {\r\n      this.showCategoryDetail = true;\r\n      this.showCommodityList = false;\r\n      this.showProductDetail = false;\r\n      this.showItemDetail = false;\r\n      this.selectedProductId = '';\r\n      this.selectedItemId = '';\r\n      this.$router.push(`/commodity/${this.selectedCategory}`);\r\n    },\r\n    returnToProduct() {\r\n      this.showProductDetail = true;\r\n      this.showCategoryDetail = false;\r\n      this.showCommodityList = false;\r\n      this.showItemDetail = false;\r\n      this.selectedItemId = '';\r\n      this.$router.push(`/commodity/${this.selectedCategory}/product/${this.selectedProductId}`);\r\n    },\r\n    returnToMain() {\r\n      this.showCommodityList = true;\r\n      this.showCategoryDetail = false;\r\n      this.showProductDetail = false;\r\n      this.showItemDetail = false;\r\n      this.selectedCategory = '';\r\n      this.selectedProductId = '';\r\n      this.selectedItemId = '';\r\n      this.$router.push('/commodity');\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.commodity-container {\r\n  position: relative;\r\n  width: 100%;\r\n  min-height: 100vh;\r\n  overflow: hidden;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.commodity-background {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-image: url('@/assets/background.png');\r\n  background-size: cover;\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  background-attachment: fixed;\r\n  z-index: 0;\r\n}\r\n\r\n.commodity-background::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.commodity-content {\r\n  position: relative;\r\n  z-index: 1;\r\n  max-width: 1000px;\r\n  margin: 0 auto;\r\n  width: 100%;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}