{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"commodity-container\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Header = _resolveComponent(\"Header\");\n  const _component_CommodityList = _resolveComponent(\"CommodityList\");\n  const _component_CategoryDetail = _resolveComponent(\"CategoryDetail\");\n  const _component_ProductDetail = _resolveComponent(\"ProductDetail\");\n  const _component_ItemDetail = _resolveComponent(\"ItemDetail\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_Header), _createElementVNode(\"div\", _hoisted_1, [_cache[1] || (_cache[1] = _createElementVNode(\"div\", {\n    class: \"commodity-background\"\n  }, null, -1 /* HOISTED */)), $data.showCommodityList ? (_openBlock(), _createBlock(_component_CommodityList, {\n    key: 0,\n    onSwitchToCategoryDetail: $options.switchToCategoryDetail,\n    class: \"commodity-content\"\n  }, null, 8 /* PROPS */, [\"onSwitchToCategoryDetail\"])) : $data.showCategoryDetail ? (_openBlock(), _createBlock(_component_CategoryDetail, {\n    key: 1,\n    category: $data.selectedCategory,\n    onSwitchToCommodityList: _cache[0] || (_cache[0] = $event => $data.showCommodityList = true),\n    onViewProduct: $options.viewProduct,\n    class: \"commodity-content\"\n  }, null, 8 /* PROPS */, [\"category\", \"onViewProduct\"])) : $data.showProductDetail ? (_openBlock(), _createBlock(_component_ProductDetail, {\n    key: 2,\n    productId: $data.selectedProductId,\n    categoryId: $data.selectedCategory,\n    onReturnToCategory: $options.returnToCategory,\n    onNavigateToItem: $options.navigateToItem,\n    class: \"commodity-content\"\n  }, null, 8 /* PROPS */, [\"productId\", \"categoryId\", \"onReturnToCategory\", \"onNavigateToItem\"])) : $data.showItemDetail ? (_openBlock(), _createBlock(_component_ItemDetail, {\n    key: 3,\n    itemId: $data.selectedItemId,\n    productId: $data.selectedProductId,\n    categoryId: $data.selectedCategory,\n    onReturnToProduct: $options.returnToProduct,\n    onReturnToMain: $options.returnToMain,\n    class: \"commodity-content\"\n  }, null, 8 /* PROPS */, [\"itemId\", \"productId\", \"categoryId\", \"onReturnToProduct\", \"onReturnToMain\"])) : _createCommentVNode(\"v-if\", true)])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_createVNode","_component_Header","_createElementVNode","_hoisted_1","$data","showCommodityList","_createBlock","_component_CommodityList","key","onSwitchToCategoryDetail","$options","switchToCategoryDetail","showCategoryDetail","_component_CategoryDetail","category","selectedCategory","onSwitchToCommodityList","_cache","$event","onViewProduct","viewProduct","showProductDetail","_component_ProductDetail","productId","selectedProductId","categoryId","onReturnToCategory","returnToCategory","onNavigateToItem","navigateToItem","showItemDetail","_component_ItemDetail","itemId","selectedItemId","onReturnToProduct","returnToProduct","onReturnToMain","returnToMain","_createCommentVNode"],"sources":["D:\\ournewpetstore\\src\\views\\commodity\\CommodityView.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <Header />\r\n      <div class=\"commodity-container\">\r\n        <div class=\"commodity-background\"></div>\r\n        <CommodityList \r\n          v-if=\"showCommodityList\" \r\n          @switch-to-category-detail=\"switchToCategoryDetail\" \r\n          class=\"commodity-content\"\r\n        />\r\n        <CategoryDetail \r\n          v-else-if=\"showCategoryDetail\"\r\n          :category=\"selectedCategory\" \r\n          @switch-to-commodity-list=\"showCommodityList = true\" \r\n          @view-product=\"viewProduct\"\r\n          class=\"commodity-content\"\r\n        />\r\n        <ProductDetail\r\n          v-else-if=\"showProductDetail\"\r\n          :productId=\"selectedProductId\"\r\n          :categoryId=\"selectedCategory\"\r\n          @return-to-category=\"returnToCategory\"\r\n          @navigate-to-item=\"navigateToItem\"\r\n          class=\"commodity-content\"\r\n        />\r\n        <ItemDetail\r\n          v-else-if=\"showItemDetail\"\r\n          :itemId=\"selectedItemId\"\r\n          :productId=\"selectedProductId\"\r\n          :categoryId=\"selectedCategory\"\r\n          @return-to-product=\"returnToProduct\"\r\n          @return-to-main=\"returnToMain\"\r\n          class=\"commodity-content\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </template>\r\n\r\n<script>\r\nimport Header from '@/components/CommonTop.vue';\r\nimport CommodityList from '@/components/commodity/CommodityList.vue';\r\nimport CategoryDetail from '@/components/commodity/CategoryDetail.vue';\r\nimport ProductDetail from '@/components/commodity/ProductDetail.vue';\r\nimport ItemDetail from '@/components/commodity/ItemDetail.vue';\r\n\r\nexport default {\r\n  components: {\r\n    Header,\r\n    CommodityList,\r\n    CategoryDetail,\r\n    ProductDetail,\r\n    ItemDetail\r\n  },\r\n  props: {\r\n    category: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    productId: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    itemId: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    view: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      showCommodityList: !this.category && !this.productId && !this.itemId,\r\n      showCategoryDetail: !!this.category && !this.productId && !this.itemId,\r\n      showProductDetail: !!this.productId && !this.itemId,\r\n      showItemDetail: !!this.itemId,\r\n      selectedCategory: this.category || '',\r\n      selectedProductId: this.productId || '',\r\n      selectedItemId: this.itemId || ''\r\n    }\r\n  },\r\n  created() {\r\n    // 组件创建时根据路由参数初始化状态\r\n    this.initializeFromRoute(this.$route);\r\n  },\r\n  watch: {\r\n    // 监听路由参数变化\r\n    $route(to) {\r\n      this.initializeFromRoute(to);\r\n    }\r\n  },\r\n  methods: {\r\n    // 根据路由参数初始化组件状态\r\n    initializeFromRoute(route) {\r\n      if (route.params.itemId) {\r\n        // 如果有商品项ID参数，显示商品项详情\r\n        this.selectedItemId = route.params.itemId;\r\n        this.selectedProductId = route.params.productId;\r\n        this.selectedCategory = route.params.categoryId;\r\n        this.showCommodityList = false;\r\n        this.showCategoryDetail = false;\r\n        this.showProductDetail = false;\r\n        this.showItemDetail = true;\r\n      } else if (route.params.productId) {\r\n        // 如果有产品ID参数，显示产品详情\r\n        this.selectedProductId = route.params.productId;\r\n        this.selectedCategory = route.params.categoryId;\r\n        this.selectedItemId = '';\r\n        this.showCommodityList = false;\r\n        this.showCategoryDetail = false;\r\n        this.showProductDetail = true;\r\n        this.showItemDetail = false;\r\n      } else if (route.params.category) {\r\n        // 如果只有分类参数，显示分类详情\r\n        this.selectedCategory = route.params.category;\r\n        this.selectedProductId = '';\r\n        this.selectedItemId = '';\r\n        this.showCommodityList = false;\r\n        this.showCategoryDetail = true;\r\n        this.showProductDetail = false;\r\n        this.showItemDetail = false;\r\n      } else {\r\n        // 如果没有参数，显示商品列表\r\n        this.selectedCategory = '';\r\n        this.selectedProductId = '';\r\n        this.selectedItemId = '';\r\n        this.showCommodityList = true;\r\n        this.showCategoryDetail = false;\r\n        this.showProductDetail = false;\r\n        this.showItemDetail = false;\r\n      }\r\n    },\r\n    switchToCategoryDetail(category) {\r\n      this.selectedCategory = category;\r\n      this.showCommodityList = false;\r\n      this.showCategoryDetail = true;\r\n      this.showProductDetail = false;\r\n      this.showItemDetail = false;\r\n      // 更新URL，但不重新加载页面\r\n      this.$router.push(`/commodity/${category}`);\r\n    },\r\n    viewProduct(productId, category) {\r\n      this.selectedProductId = productId;\r\n      this.selectedCategory = category;\r\n      this.showCommodityList = false;\r\n      this.showCategoryDetail = false;\r\n      this.showProductDetail = true;\r\n      this.showItemDetail = false;\r\n      // 更新URL以包含产品ID\r\n      this.$router.push(`/commodity/${category}/product/${productId}`);\r\n    },\r\n    navigateToItem(itemId) {\r\n      this.selectedItemId = itemId;\r\n      this.showCommodityList = false;\r\n      this.showCategoryDetail = false;\r\n      this.showProductDetail = false;\r\n      this.showItemDetail = true;\r\n      // 更新URL以包含商品项ID\r\n      this.$router.push(`/commodity/${this.selectedCategory}/product/${this.selectedProductId}/item/${itemId}`);\r\n    },\r\n    returnToCategory() {\r\n      this.showCategoryDetail = true;\r\n      this.showCommodityList = false;\r\n      this.showProductDetail = false;\r\n      this.showItemDetail = false;\r\n      this.selectedProductId = '';\r\n      this.selectedItemId = '';\r\n      this.$router.push(`/commodity/${this.selectedCategory}`);\r\n    },\r\n    returnToProduct() {\r\n      this.showProductDetail = true;\r\n      this.showCategoryDetail = false;\r\n      this.showCommodityList = false;\r\n      this.showItemDetail = false;\r\n      this.selectedItemId = '';\r\n      this.$router.push(`/commodity/${this.selectedCategory}/product/${this.selectedProductId}`);\r\n    },\r\n    returnToMain() {\r\n      this.showCommodityList = true;\r\n      this.showCategoryDetail = false;\r\n      this.showProductDetail = false;\r\n      this.showItemDetail = false;\r\n      this.selectedCategory = '';\r\n      this.selectedProductId = '';\r\n      this.selectedItemId = '';\r\n      this.$router.push('/commodity');\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.commodity-container {\r\n  position: relative;\r\n  width: 100%;\r\n  min-height: 100vh;\r\n  overflow: hidden;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.commodity-background {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-image: url('@/assets/background.png');\r\n  background-size: cover;\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  background-attachment: fixed;\r\n  z-index: 0;\r\n}\r\n\r\n.commodity-background::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.commodity-content {\r\n  position: relative;\r\n  z-index: 1;\r\n  max-width: 1000px;\r\n  margin: 0 auto;\r\n  width: 100%;\r\n}\r\n</style>"],"mappings":";;EAGWA,KAAK,EAAC;AAAqB;;;;;;;uBAFlCC,mBAAA,CAkCM,cAjCJC,YAAA,CAAUC,iBAAA,GACVC,mBAAA,CA+BM,OA/BNC,UA+BM,G,0BA9BJD,mBAAA,CAAwC;IAAnCJ,KAAK,EAAC;EAAsB,6BAEzBM,KAAA,CAAAC,iBAAiB,I,cADzBC,YAAA,CAIEC,wBAAA;IATVC,GAAA;IAOWC,wBAAyB,EAAEC,QAAA,CAAAC,sBAAsB;IAClDb,KAAK,EAAC;2DAGKM,KAAA,CAAAQ,kBAAkB,I,cAD/BN,YAAA,CAMEO,yBAAA;IAhBVL,GAAA;IAYWM,QAAQ,EAAEV,KAAA,CAAAW,gBAAgB;IAC1BC,uBAAwB,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEd,KAAA,CAAAC,iBAAiB;IAC3Cc,aAAY,EAAET,QAAA,CAAAU,WAAW;IAC1BtB,KAAK,EAAC;4DAGKM,KAAA,CAAAiB,iBAAiB,I,cAD9Bf,YAAA,CAOEgB,wBAAA;IAxBVd,GAAA;IAmBWe,SAAS,EAAEnB,KAAA,CAAAoB,iBAAiB;IAC5BC,UAAU,EAAErB,KAAA,CAAAW,gBAAgB;IAC5BW,kBAAkB,EAAEhB,QAAA,CAAAiB,gBAAgB;IACpCC,gBAAgB,EAAElB,QAAA,CAAAmB,cAAc;IACjC/B,KAAK,EAAC;oGAGKM,KAAA,CAAA0B,cAAc,I,cAD3BxB,YAAA,CAQEyB,qBAAA;IAjCVvB,GAAA;IA2BWwB,MAAM,EAAE5B,KAAA,CAAA6B,cAAc;IACtBV,SAAS,EAAEnB,KAAA,CAAAoB,iBAAiB;IAC5BC,UAAU,EAAErB,KAAA,CAAAW,gBAAgB;IAC5BmB,iBAAiB,EAAExB,QAAA,CAAAyB,eAAe;IAClCC,cAAc,EAAE1B,QAAA,CAAA2B,YAAY;IAC7BvC,KAAK,EAAC;2GAhChBwC,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}