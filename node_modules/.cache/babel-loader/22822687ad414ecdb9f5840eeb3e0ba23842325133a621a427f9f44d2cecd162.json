{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"order-details-container\"\n};\nconst _hoisted_2 = {\n  class: \"confirm-table\"\n};\nconst _hoisted_3 = {\n  class: \"order-value\"\n};\nconst _hoisted_4 = {\n  class: \"order-value\"\n};\nconst _hoisted_5 = {\n  class: \"order-main-table\"\n};\nconst _hoisted_6 = {\n  class: \"item-cell\"\n};\nconst _hoisted_7 = {\n  class: \"item-cell\"\n};\nconst _hoisted_8 = {\n  class: \"item-cell\"\n};\nconst _hoisted_9 = {\n  class: \"item-cell\"\n};\nconst _hoisted_10 = {\n  class: \"item-cell\"\n};\nconst _hoisted_11 = {\n  colspan: \"4\",\n  class: \"total-row\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Header = _resolveComponent(\"Header\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_Header), _cache[5] || (_cache[5] = _createElementVNode(\"div\", {\n    class: \"auth-background\"\n  }, null, -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_1, [_cache[4] || (_cache[4] = _createElementVNode(\"h2\", null, \"Order Details\", -1 /* HOISTED */)), _createElementVNode(\"table\", _hoisted_2, [_createElementVNode(\"tbody\", null, [_createElementVNode(\"tr\", null, [_cache[0] || (_cache[0] = _createElementVNode(\"td\", {\n    rowspan: \"2\",\n    class: \"order-info\"\n  }, \"Order Information\", -1 /* HOISTED */)), _cache[1] || (_cache[1] = _createElementVNode(\"td\", {\n    class: \"order-label\"\n  }, \"Order ID:\", -1 /* HOISTED */)), _createElementVNode(\"td\", _hoisted_3, _toDisplayString($data.order.orderId), 1 /* TEXT */)]), _createElementVNode(\"tr\", null, [_cache[2] || (_cache[2] = _createElementVNode(\"td\", {\n    class: \"order-label\"\n  }, \"Order Date:\", -1 /* HOISTED */)), _createElementVNode(\"td\", _hoisted_4, _toDisplayString($data.order.orderDate), 1 /* TEXT */)])])]), _createElementVNode(\"table\", _hoisted_5, [_createCommentVNode(\" 商品列表 \"), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.order.lineItems, (item, index) => {\n    return _openBlock(), _createElementBlock(\"tbody\", {\n      key: index\n    }, [_cache[3] || (_cache[3] = _createElementVNode(\"tr\", null, [_createElementVNode(\"td\", {\n      class: \"item-header\"\n    }, \"Item ID\"), _createElementVNode(\"td\", {\n      class: \"item-header\"\n    }, \"Description\"), _createElementVNode(\"td\", {\n      class: \"item-header\"\n    }, \"Quantity\"), _createElementVNode(\"td\", {\n      class: \"item-header\"\n    }, \"Price\"), _createElementVNode(\"td\", {\n      class: \"item-header\"\n    }, \"Total Cost\")], -1 /* HOISTED */)), _createElementVNode(\"tr\", null, [_createElementVNode(\"td\", _hoisted_6, _toDisplayString(item.itemId), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_7, _toDisplayString(item.descriptionText || item.descriptionImage), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_8, _toDisplayString(item.quantity), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_9, \"$\" + _toDisplayString(item.unitPrice.toFixed(2)), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_10, \"$\" + _toDisplayString((item.unitPrice * item.quantity).toFixed(2)), 1 /* TEXT */)])]);\n  }), 128 /* KEYED_FRAGMENT */)), _createCommentVNode(\" 订单总计 \"), _createElementVNode(\"tfoot\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"td\", _hoisted_11, \" Total: $\" + _toDisplayString($data.order.totalPrice.toFixed(2)), 1 /* TEXT */)])])])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","colspan","_createElementBlock","_Fragment","_createVNode","_component_Header","_createElementVNode","_hoisted_1","_hoisted_2","rowspan","_hoisted_3","_toDisplayString","$data","order","orderId","_hoisted_4","orderDate","_hoisted_5","_createCommentVNode","_renderList","lineItems","item","index","key","_hoisted_6","itemId","_hoisted_7","descriptionText","descriptionImage","_hoisted_8","quantity","_hoisted_9","unitPrice","toFixed","_hoisted_10","_hoisted_11","totalPrice"],"sources":["D:\\ournewpetstore\\src\\views\\OrderDetails.vue"],"sourcesContent":["<template>\r\n    <Header />\r\n    <div class=\"auth-background\"></div>\r\n    <div class=\"order-details-container\">\r\n      <h2>Order Details</h2>\r\n            <table class=\"confirm-table\">\r\n        <tbody>\r\n          <tr>\r\n            <td rowspan=\"2\" class=\"order-info\">Order Information</td>\r\n            <td class=\"order-label\">Order ID:</td>\r\n            <td class=\"order-value\">{{ order.orderId }}</td>\r\n          </tr>\r\n          <tr>\r\n            <td class=\"order-label\">Order Date:</td>\r\n            <td class=\"order-value\">{{order.orderDate}}</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n      <table class=\"order-main-table\">\r\n\r\n        \r\n        <!-- 商品列表 -->\r\n        <tbody v-for=\"(item, index) in order.lineItems\" :key=\"index\">\r\n          <tr>\r\n            <td class=\"item-header\">Item ID</td>\r\n            <td class=\"item-header\">Description</td>\r\n            <td class=\"item-header\">Quantity</td>\r\n            <td class=\"item-header\">Price</td>\r\n            <td class=\"item-header\">Total Cost</td>\r\n          </tr>\r\n          <tr>\r\n            <td class=\"item-cell\">{{ item.itemId }}</td>\r\n            <td class=\"item-cell\">{{ item.descriptionText || item.descriptionImage }}</td>\r\n            <td class=\"item-cell\">{{ item.quantity }}</td>\r\n            <td class=\"item-cell\">${{ item.unitPrice.toFixed(2) }}</td>\r\n            <td class=\"item-cell\">${{ (item.unitPrice * item.quantity).toFixed(2) }}</td>\r\n          </tr>\r\n        </tbody>\r\n        \r\n        <!-- 订单总计 -->\r\n        <tfoot>\r\n          <tr>\r\n            <td colspan=\"4\" class=\"total-row\">\r\n              Total: ${{ order.totalPrice.toFixed(2) }}\r\n            </td>\r\n          </tr>\r\n        </tfoot>\r\n      </table>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import axios from 'axios'\r\n  import Header from '@/components/CommonTop.vue'\r\n  export default {\r\n    components: {\r\n    Header\r\n  },\r\n    name: 'OrderDetails',\r\n    data() {\r\n      return {\r\n        order: {\r\n          orderId: '',\r\n          username: '',\r\n          orderDate: '',\r\n          shipAddress1: '',\r\n          shipAddress2: '',\r\n          shipCity: '',\r\n          shipState: '',\r\n          shipZip: '',\r\n          shipCountry: '',\r\n          billAddress1: '',\r\n          billAddress2: '',\r\n          billCity: '',\r\n          billState: '',\r\n          billZip: '',\r\n          billCountry: '',\r\n          courier: '',\r\n          totalPrice: 0.00,\r\n          billToFirstName: '',\r\n          billToLastName: '',\r\n          shipToFirstName: '',\r\n          shipToLastName: '',\r\n          creditCard: '',\r\n          expiryDate: '',\r\n          cardType: '',\r\n          locale: '',\r\n          lineItems: []\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      fetchOrder(id) {\r\n        axios.get(`http://localhost:9090/api/v8/orders/${id}`)\r\n          .then(response => {\r\n            const res = response.data;\r\n            if (res.status === 0) {\r\n              const orderData = res.data.order;\r\n              const lineItemsData = res.data.lineItems;\r\n              const itemDetailsData = res.data.itemDetails;\r\n  \r\n              // 构建 itemId 到 itemDetails 的映射\r\n              const itemDetailsMap = {};\r\n              for (let i = 0; i < itemDetailsData.length; i++) {\r\n                const item = itemDetailsData[i];\r\n                itemDetailsMap[item.itemId] = item;\r\n              }\r\n  \r\n              // 处理 lineItems，手动添加对应的 itemDetails 信息\r\n              const enrichedLineItems = [];\r\n              for (let j = 0; j < lineItemsData.length; j++) {\r\n                const lineItem = lineItemsData[j];\r\n                const itemDetail = itemDetailsMap[lineItem.itemId] || {};\r\n  \r\n                enrichedLineItems.push({\r\n                  orderId: lineItem.orderId,\r\n                  lineNumber: lineItem.lineNumber,\r\n                  quantity: lineItem.quantity,\r\n                  itemId: lineItem.itemId,\r\n                  unitPrice: lineItem.unitPrice,\r\n                  productId: itemDetail.productId || '',\r\n                  productName: itemDetail.productName || '',\r\n                  descriptionImage: itemDetail.descriptionImage || '',\r\n                  descriptionText: itemDetail.descriptionText || '',\r\n                  listPrice: itemDetail.listPrice || 0,\r\n                  attributes: itemDetail.attributes || '',\r\n                  inventoryQuantity: itemDetail.quantity || 0\r\n                });\r\n              }\r\n  \r\n              // 更新订单数据\r\n              this.order.orderId = orderData.orderId;\r\n              this.order.username = orderData.username;\r\n              this.order.orderDate = orderData.orderDate;\r\n              this.order.shipAddress1 = orderData.shipAddress1;\r\n              this.order.shipAddress2 = orderData.shipAddress2;\r\n              this.order.shipCity = orderData.shipCity;\r\n              this.order.shipState = orderData.shipState;\r\n              this.order.shipZip = orderData.shipZip;\r\n              this.order.shipCountry = orderData.shipCountry;\r\n              this.order.billAddress1 = orderData.billAddress1;\r\n              this.order.billAddress2 = orderData.billAddress2;\r\n              this.order.billCity = orderData.billCity;\r\n              this.order.billState = orderData.billState;\r\n              this.order.billZip = orderData.billZip;\r\n              this.order.billCountry = orderData.billCountry;\r\n              this.order.courier = orderData.courier;\r\n              this.order.totalPrice = orderData.totalPrice;\r\n              this.order.billToFirstName = orderData.billToFirstName;\r\n              this.order.billToLastName = orderData.billToLastName;\r\n              this.order.shipToFirstName = orderData.shipToFirstName;\r\n              this.order.shipToLastName = orderData.shipToLastName;\r\n              this.order.creditCard = orderData.creditCard;\r\n              this.order.expiryDate = orderData.expiryDate;\r\n              this.order.cardType = orderData.cardType;\r\n              this.order.locale = orderData.locale;\r\n              this.order.lineItems = enrichedLineItems;\r\n            } else {\r\n              alert(res.message || 'Failed to fetch order.');\r\n            }\r\n          })\r\n          .catch(error => {\r\n            console.error('Error fetching order:', error);\r\n            alert('An error occurred while fetching the order.');\r\n          });\r\n      },\r\n      formatDate(dateStr) {\r\n        if (!dateStr) return '';\r\n        const date = new Date(dateStr);\r\n        const year = date.getFullYear();\r\n        const month = String(date.getMonth() + 1).padStart(2, '0');\r\n        const day = String(date.getDate()).padStart(2, '0');\r\n        return `${year}-${month}-${day}`;\r\n      },\r\n      formatCreditCard(cardNumber) {\r\n        if (!cardNumber) return '';\r\n        // 保留最后4位，前面用*号替代\r\n        return cardNumber.replace(/\\d{12}(\\d{4})/, '**** **** **** $1');\r\n      }\r\n    },\r\n    created() {\r\n      // 页面创建时默认请求id为1的订单\r\n      this.fetchOrder(1);\r\n    }\r\n  }\r\n  </script>\r\n  \r\n\r\n  \r\n  <style scoped>\r\n  .auth-background {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-image: url('@/assets/background.png');\r\n  background-size: cover;\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  background-attachment: fixed;\r\n  z-index: -1; /* 关键修改：将层级设为-1使其位于内容下方 */\r\n}\r\n\r\n.confirm-container {\r\n  position: relative; /* 新增：创建新的层叠上下文 */\r\n  z-index: 1; /* 新增：确保内容在背景之上 */\r\n  max-width: 800px;\r\n  margin: 80px auto 0;\r\n  padding: 20px;\r\n  background: white; /* 可选：添加白色背景增强可读性 */\r\n  box-shadow: 0 0 20px rgba(0,0,0,0.1); /* 可选：添加阴影效果 */\r\n}\r\n  .order-details-container {\r\n  position: relative; /* 新增：创建新的层叠上下文 */\r\n  z-index: 1; /* 新增：确保内容在背景之上 */\r\n  max-width: 800px;\r\n  margin: 80px auto 0;\r\n  padding: 20px;\r\n  background: white; /* 可选：添加白色背景增强可读性 */\r\n  box-shadow: 0 0 20px rgba(0,0,0,0.1); /* 可选：添加阴影效果 */\r\n  }\r\n  \r\n  .order-main-table {\r\n    width: 100%;\r\n    border-collapse: collapse;\r\n    margin-top: 20px;\r\n  }\r\n  \r\n  .order-main-table th {\r\n    background-color: #f5f5f5;\r\n    padding: 10px;\r\n    text-align: left;\r\n  }\r\n  \r\n  .order-main-table td {\r\n    padding: 10px;\r\n    border-bottom: 1px solid #ddd;\r\n  }\r\n  \r\n  .order-info {\r\n    background-color: #f0f8ff;\r\n    font-weight: bold;\r\n  }\r\n  \r\n  .info-label {\r\n    font-weight: bold;\r\n  }\r\n  \r\n  .info-value {\r\n    color: #555;\r\n  }\r\n  \r\n  .item-header {\r\n    background-color: #f5f5f5;\r\n    font-weight: bold;\r\n  }\r\n  \r\n  .item-cell {\r\n    padding: 8px;\r\n  }\r\n  \r\n  .total-row {\r\n    text-align: center;\r\n    font-weight: bold;\r\n    background-color: #f0f8ff;\r\n  }\r\n  </style>"],"mappings":";;EAGSA,KAAK,EAAC;AAAyB;;EAErBA,KAAK,EAAC;AAAe;;EAKxBA,KAAK,EAAC;AAAa;;EAInBA,KAAK,EAAC;AAAa;;EAItBA,KAAK,EAAC;AAAkB;;EAarBA,KAAK,EAAC;AAAW;;EACjBA,KAAK,EAAC;AAAW;;EACjBA,KAAK,EAAC;AAAW;;EACjBA,KAAK,EAAC;AAAW;;EACjBA,KAAK,EAAC;AAAW;;EAOjBC,OAAO,EAAC,GAAG;EAACD,KAAK,EAAC;;;;uBA1ClCE,mBAAA,CAAAC,SAAA,SACIC,YAAA,CAAUC,iBAAA,G,0BACVC,mBAAA,CAAmC;IAA9BN,KAAK,EAAC;EAAiB,6BAC5BM,mBAAA,CA6CM,OA7CNC,UA6CM,G,0BA5CJD,mBAAA,CAAsB,YAAlB,eAAa,sBACXA,mBAAA,CAYE,SAZFE,UAYE,GAXNF,mBAAA,CAUQ,gBATNA,mBAAA,CAIK,a,0BAHHA,mBAAA,CAAyD;IAArDG,OAAO,EAAC,GAAG;IAACT,KAAK,EAAC;KAAa,mBAAiB,sB,0BACpDM,mBAAA,CAAsC;IAAlCN,KAAK,EAAC;EAAa,GAAC,WAAS,sBACjCM,mBAAA,CAAgD,MAAhDI,UAAgD,EAAAC,gBAAA,CAArBC,KAAA,CAAAC,KAAK,CAACC,OAAO,iB,GAE1CR,mBAAA,CAGK,a,0BAFHA,mBAAA,CAAwC;IAApCN,KAAK,EAAC;EAAa,GAAC,aAAW,sBACnCM,mBAAA,CAAgD,MAAhDS,UAAgD,EAAAJ,gBAAA,CAAtBC,KAAA,CAAAC,KAAK,CAACG,SAAS,iB,OAI/CV,mBAAA,CA6BQ,SA7BRW,UA6BQ,GA1BNC,mBAAA,UAAa,G,kBACbhB,mBAAA,CAeQC,SAAA,QArChBgB,WAAA,CAsBuCP,KAAA,CAAAC,KAAK,CAACO,SAAS,EAtBtD,CAsBuBC,IAAI,EAAEC,KAAK;yBAA1BpB,mBAAA,CAeQ;MAfyCqB,GAAG,EAAED;IAAK,I,0BACzDhB,mBAAA,CAMK,aALHA,mBAAA,CAAoC;MAAhCN,KAAK,EAAC;IAAa,GAAC,SAAO,GAC/BM,mBAAA,CAAwC;MAApCN,KAAK,EAAC;IAAa,GAAC,aAAW,GACnCM,mBAAA,CAAqC;MAAjCN,KAAK,EAAC;IAAa,GAAC,UAAQ,GAChCM,mBAAA,CAAkC;MAA9BN,KAAK,EAAC;IAAa,GAAC,OAAK,GAC7BM,mBAAA,CAAuC;MAAnCN,KAAK,EAAC;IAAa,GAAC,YAAU,E,sBAEpCM,mBAAA,CAMK,aALHA,mBAAA,CAA4C,MAA5CkB,UAA4C,EAAAb,gBAAA,CAAnBU,IAAI,CAACI,MAAM,kBACpCnB,mBAAA,CAA8E,MAA9EoB,UAA8E,EAAAf,gBAAA,CAArDU,IAAI,CAACM,eAAe,IAAIN,IAAI,CAACO,gBAAgB,kBACtEtB,mBAAA,CAA8C,MAA9CuB,UAA8C,EAAAlB,gBAAA,CAArBU,IAAI,CAACS,QAAQ,kBACtCxB,mBAAA,CAA2D,MAA3DyB,UAA2D,EAArC,GAAC,GAAApB,gBAAA,CAAGU,IAAI,CAACW,SAAS,CAACC,OAAO,qBAChD3B,mBAAA,CAA6E,MAA7E4B,WAA6E,EAAvD,GAAC,GAAAvB,gBAAA,EAAIU,IAAI,CAACW,SAAS,GAAGX,IAAI,CAACS,QAAQ,EAAEG,OAAO,oB;kCAItEf,mBAAA,UAAa,EACbZ,mBAAA,CAMQ,gBALNA,mBAAA,CAIK,aAHHA,mBAAA,CAEK,MAFL6B,WAEK,EAF6B,WACxB,GAAAxB,gBAAA,CAAGC,KAAA,CAAAC,KAAK,CAACuB,UAAU,CAACH,OAAO,oB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}