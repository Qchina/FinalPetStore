{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport axios from 'axios';\nexport default {\n  name: 'OrderDetails',\n  data() {\n    return {\n      order: {\n        orderId: '',\n        orderDate: '',\n        cardType: '',\n        creditCard: '',\n        expiryDate: '',\n        billToFirstName: '',\n        billToLastName: '',\n        billAddress1: '',\n        billAddress2: '',\n        billCity: '',\n        billState: '',\n        billZip: '',\n        billCountry: '',\n        shipToFirstName: '',\n        shipToLastName: '',\n        shipAddress1: '',\n        shipAddress2: '',\n        shipCity: '',\n        shipState: '',\n        shipZip: '',\n        shipCountry: '',\n        totalPrice: 0.00,\n        lineItems: []\n      }\n    };\n  },\n  methods: {\n    fetchOrder(id) {\n      axios.get(`http://localhost:9090/orders/${id}`).then(response => {\n        const res = response.data;\n        if (res.status === 0) {\n          const orderData = res.data.order;\n          const itemDetailsMap = {};\n          res.data.itemDetails.forEach(item => {\n            itemDetailsMap[item.itemId] = item;\n          });\n\n          // 将 lineItems 中每项补充描述信息\n          const enrichedLineItems = res.data.lineItems.map(item => {\n            return {\n              ...item,\n              ...itemDetailsMap[item.itemId]\n            };\n          });\n          this.order = {\n            ...orderData,\n            lineItems: enrichedLineItems\n          };\n        } else {\n          alert(res.message || 'Failed to fetch order.');\n        }\n      }).catch(error => {\n        console.error('Error fetching order:', error);\n        alert('An error occurred while fetching the order.');\n      });\n    },\n    formatDate(dateStr) {\n      const date = new Date(dateStr);\n      return date.toLocaleDateString();\n    },\n    formatCreditCard(cardNumber) {\n      return cardNumber.replace(/\\d{12}(\\d{4})/, '**** **** **** $1');\n    }\n  },\n  created() {\n    // 默认获取ID为1的订单\n    this.fetchOrder(1);\n  }\n};","map":{"version":3,"names":["axios","name","data","order","orderId","orderDate","cardType","creditCard","expiryDate","billToFirstName","billToLastName","billAddress1","billAddress2","billCity","billState","billZip","billCountry","shipToFirstName","shipToLastName","shipAddress1","shipAddress2","shipCity","shipState","shipZip","shipCountry","totalPrice","lineItems","methods","fetchOrder","id","get","then","response","res","status","orderData","itemDetailsMap","itemDetails","forEach","item","itemId","enrichedLineItems","map","alert","message","catch","error","console","formatDate","dateStr","date","Date","toLocaleDateString","formatCreditCard","cardNumber","replace","created"],"sources":["D:\\ournewpetstore\\src\\views\\OrderDetails.vue"],"sourcesContent":["<template>\r\n    <div class=\"order-details-container\">\r\n      <h2>Order Details</h2>\r\n      \r\n      <table class=\"order-main-table\">\r\n        <thead>\r\n          <tr>\r\n            <th colspan=\"4\">Order #{{ order.orderId }} - {{ formatDate(order.orderDate) }}</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr>\r\n            <td rowspan=\"3\" class=\"order-info\">Payment Details</td>\r\n            <td class=\"info-label\">Card Type:</td>\r\n            <td class=\"info-value\">{{ order.cardType }}</td>\r\n            <td rowspan=\"3\" class=\"item-header\">Item ID</td>\r\n            <td class=\"item-header\">Description</td>\r\n            <td class=\"item-header\">Quantity</td>\r\n            <td class=\"item-header\">Price</td>\r\n            <td class=\"item-header\">Total Cost</td>\r\n          </tr>\r\n          <tr>\r\n            <td class=\"info-label\">Credit Card:</td>\r\n            <td class=\"info-value\">{{ formatCreditCard(order.creditCard) }}</td>\r\n          </tr>\r\n          <tr>\r\n            <td class=\"info-label\">Expiry Date:</td>\r\n            <td class=\"info-value\">{{ order.expiryDate }}</td>\r\n          </tr>\r\n          \r\n          <tr>\r\n            <td rowspan=\"2\" class=\"order-info\">Billing Address</td>\r\n            <td class=\"info-label\">Name:</td>\r\n            <td class=\"info-value\">{{ order.billToFirstName }} {{ order.billToLastName }}</td>\r\n            <!-- 商品信息将在下方动态生成 -->\r\n          </tr>\r\n          <tr>\r\n            <td class=\"info-label\">Address:</td>\r\n            <td class=\"info-value\">\r\n              {{ order.billAddress1 }}<br>\r\n              {{ order.billAddress2 }}<br>\r\n              {{ order.billCity }}, {{ order.billState }} {{ order.billZip }}<br>\r\n              {{ order.billCountry }}\r\n            </td>\r\n          </tr>\r\n          \r\n          <tr>\r\n            <td rowspan=\"2\" class=\"order-info\">Shipping Address</td>\r\n            <td class=\"info-label\">Name:</td>\r\n            <td class=\"info-value\">{{ order.shipToFirstName }} {{ order.shipToLastName }}</td>\r\n          </tr>\r\n          <tr>\r\n            <td class=\"info-label\">Address:</td>\r\n            <td class=\"info-value\">\r\n              {{ order.shipAddress1 }}<br>\r\n              {{ order.shipAddress2 }}<br>\r\n              {{ order.shipCity }}, {{ order.shipState }} {{ order.shipZip }}<br>\r\n              {{ order.shipCountry }}\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n        \r\n        <!-- 商品列表 -->\r\n        <tbody v-for=\"(item, index) in order.lineItems\" :key=\"index\">\r\n          <tr>\r\n            <td class=\"item-cell\">{{ item.itemId }}</td>\r\n            <td class=\"item-cell\">{{ item.descriptionText || item.descriptionImage }}</td>\r\n            <td class=\"item-cell\">{{ item.quantity }}</td>\r\n            <td class=\"item-cell\">${{ item.unitPrice.toFixed(2) }}</td>\r\n            <td class=\"item-cell\">${{ (item.unitPrice * item.quantity).toFixed(2) }}</td>\r\n          </tr>\r\n        </tbody>\r\n        \r\n        <!-- 订单总计 -->\r\n        <tfoot>\r\n          <tr>\r\n            <td colspan=\"4\" class=\"total-row\">\r\n              Total: ${{ order.totalPrice.toFixed(2) }}\r\n            </td>\r\n          </tr>\r\n        </tfoot>\r\n      </table>\r\n    </div>\r\n  </template>\r\n  \r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'OrderDetails',\r\n  data() {\r\n    return {\r\n      order: {\r\n        orderId: '',\r\n        orderDate: '',\r\n        cardType: '',\r\n        creditCard: '',\r\n        expiryDate: '',\r\n        billToFirstName: '',\r\n        billToLastName: '',\r\n        billAddress1: '',\r\n        billAddress2: '',\r\n        billCity: '',\r\n        billState: '',\r\n        billZip: '',\r\n        billCountry: '',\r\n        shipToFirstName: '',\r\n        shipToLastName: '',\r\n        shipAddress1: '',\r\n        shipAddress2: '',\r\n        shipCity: '',\r\n        shipState: '',\r\n        shipZip: '',\r\n        shipCountry: '',\r\n        totalPrice: 0.00,\r\n        lineItems: []\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    fetchOrder(id) {\r\n      axios.get(`http://localhost:9090/orders/${id}`)\r\n        .then(response => {\r\n          const res = response.data;\r\n          if (res.status === 0) {\r\n            const orderData = res.data.order;\r\n            const itemDetailsMap = {};\r\n            res.data.itemDetails.forEach(item => {\r\n              itemDetailsMap[item.itemId] = item;\r\n            });\r\n\r\n            // 将 lineItems 中每项补充描述信息\r\n            const enrichedLineItems = res.data.lineItems.map(item => {\r\n              return {\r\n                ...item,\r\n                ...itemDetailsMap[item.itemId]\r\n              }\r\n            });\r\n\r\n            this.order = {\r\n              ...orderData,\r\n              lineItems: enrichedLineItems\r\n            };\r\n          } else {\r\n            alert(res.message || 'Failed to fetch order.');\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.error('Error fetching order:', error);\r\n          alert('An error occurred while fetching the order.');\r\n        });\r\n    },\r\n    formatDate(dateStr) {\r\n      const date = new Date(dateStr);\r\n      return date.toLocaleDateString();\r\n    },\r\n    formatCreditCard(cardNumber) {\r\n      return cardNumber.replace(/\\d{12}(\\d{4})/, '**** **** **** $1');\r\n    }\r\n  },\r\n  created() {\r\n    // 默认获取ID为1的订单\r\n    this.fetchOrder(1);\r\n  }\r\n}\r\n</script>\r\n\r\n  \r\n  <style scoped>\r\n  .order-details-container {\r\n    max-width: 900px;\r\n    margin: 0 auto;\r\n    padding: 20px;\r\n  }\r\n  \r\n  .order-main-table {\r\n    width: 100%;\r\n    border-collapse: collapse;\r\n    margin-top: 20px;\r\n  }\r\n  \r\n  .order-main-table th {\r\n    background-color: #f5f5f5;\r\n    padding: 10px;\r\n    text-align: left;\r\n  }\r\n  \r\n  .order-main-table td {\r\n    padding: 10px;\r\n    border-bottom: 1px solid #ddd;\r\n  }\r\n  \r\n  .order-info {\r\n    background-color: #f0f8ff;\r\n    font-weight: bold;\r\n  }\r\n  \r\n  .info-label {\r\n    font-weight: bold;\r\n  }\r\n  \r\n  .info-value {\r\n    color: #555;\r\n  }\r\n  \r\n  .item-header {\r\n    background-color: #f5f5f5;\r\n    font-weight: bold;\r\n  }\r\n  \r\n  .item-cell {\r\n    padding: 8px;\r\n  }\r\n  \r\n  .total-row {\r\n    text-align: right;\r\n    font-weight: bold;\r\n    background-color: #f0f8ff;\r\n  }\r\n  </style>"],"mappings":";;;AAsFA,OAAOA,KAAI,MAAO,OAAM;AAExB,eAAe;EACbC,IAAI,EAAE,cAAc;EACpBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE;QACLC,OAAO,EAAE,EAAE;QACXC,SAAS,EAAE,EAAE;QACbC,QAAQ,EAAE,EAAE;QACZC,UAAU,EAAE,EAAE;QACdC,UAAU,EAAE,EAAE;QACdC,eAAe,EAAE,EAAE;QACnBC,cAAc,EAAE,EAAE;QAClBC,YAAY,EAAE,EAAE;QAChBC,YAAY,EAAE,EAAE;QAChBC,QAAQ,EAAE,EAAE;QACZC,SAAS,EAAE,EAAE;QACbC,OAAO,EAAE,EAAE;QACXC,WAAW,EAAE,EAAE;QACfC,eAAe,EAAE,EAAE;QACnBC,cAAc,EAAE,EAAE;QAClBC,YAAY,EAAE,EAAE;QAChBC,YAAY,EAAE,EAAE;QAChBC,QAAQ,EAAE,EAAE;QACZC,SAAS,EAAE,EAAE;QACbC,OAAO,EAAE,EAAE;QACXC,WAAW,EAAE,EAAE;QACfC,UAAU,EAAE,IAAI;QAChBC,SAAS,EAAE;MACb;IACF;EACF,CAAC;EACDC,OAAO,EAAE;IACPC,UAAUA,CAACC,EAAE,EAAE;MACb7B,KAAK,CAAC8B,GAAG,CAAC,gCAAgCD,EAAE,EAAE,EAC3CE,IAAI,CAACC,QAAO,IAAK;QAChB,MAAMC,GAAE,GAAID,QAAQ,CAAC9B,IAAI;QACzB,IAAI+B,GAAG,CAACC,MAAK,KAAM,CAAC,EAAE;UACpB,MAAMC,SAAQ,GAAIF,GAAG,CAAC/B,IAAI,CAACC,KAAK;UAChC,MAAMiC,cAAa,GAAI,CAAC,CAAC;UACzBH,GAAG,CAAC/B,IAAI,CAACmC,WAAW,CAACC,OAAO,CAACC,IAAG,IAAK;YACnCH,cAAc,CAACG,IAAI,CAACC,MAAM,IAAID,IAAI;UACpC,CAAC,CAAC;;UAEF;UACA,MAAME,iBAAgB,GAAIR,GAAG,CAAC/B,IAAI,CAACwB,SAAS,CAACgB,GAAG,CAACH,IAAG,IAAK;YACvD,OAAO;cACL,GAAGA,IAAI;cACP,GAAGH,cAAc,CAACG,IAAI,CAACC,MAAM;YAC/B;UACF,CAAC,CAAC;UAEF,IAAI,CAACrC,KAAI,GAAI;YACX,GAAGgC,SAAS;YACZT,SAAS,EAAEe;UACb,CAAC;QACH,OAAO;UACLE,KAAK,CAACV,GAAG,CAACW,OAAM,IAAK,wBAAwB,CAAC;QAChD;MACF,CAAC,EACAC,KAAK,CAACC,KAAI,IAAK;QACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;QAC7CH,KAAK,CAAC,6CAA6C,CAAC;MACtD,CAAC,CAAC;IACN,CAAC;IACDK,UAAUA,CAACC,OAAO,EAAE;MAClB,MAAMC,IAAG,GAAI,IAAIC,IAAI,CAACF,OAAO,CAAC;MAC9B,OAAOC,IAAI,CAACE,kBAAkB,CAAC,CAAC;IAClC,CAAC;IACDC,gBAAgBA,CAACC,UAAU,EAAE;MAC3B,OAAOA,UAAU,CAACC,OAAO,CAAC,eAAe,EAAE,mBAAmB,CAAC;IACjE;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR;IACA,IAAI,CAAC5B,UAAU,CAAC,CAAC,CAAC;EACpB;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}